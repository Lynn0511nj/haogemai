# Token 消耗与成本分析

## 📊 Prompt A（免费诊断）Token 估算

### 输入 Token（Input）

#### 1. System Prompt
```
当前 System Prompt 长度：约 800 tokens
```

#### 2. User Message
```
- 用户文本信息：约 60 tokens
  - 账号阶段：~15 tokens
  - 创作重心：~15 tokens
  - 迷茫点：~15 tokens
  - 提示语：~15 tokens

- 图片（2张）：
  - 主页截图：约 500-800 tokens（取决于图片大小和内容）
  - 补充截图（可选）：约 500-800 tokens
```

**输入 Token 总计**：
- 最少：800 + 60 + 500 = **1,360 tokens**
- 最多：800 + 60 + 1,600 = **2,460 tokens**
- 平均：约 **1,900 tokens**

### 输出 Token（Output）

#### Prompt A 输出内容
```json
{
  "clarityPhase": "15字",
  "phaseInspiration": "约30字",
  "empathyMessage": "约80字",
  "dimensions": [
    5个维度 × (name + score + description约15字)
  ]
}
```

**输出 Token 估算**：
- 中文字数：约 200 字
- Token 数量：约 **300-400 tokens**（中文 1字 ≈ 1.5 tokens）
- 平均：约 **350 tokens**

---

## 💰 成本估算

### 豆包 API 定价（参考）

根据火山引擎官方定价（需要在控制台确认最新价格）：

**Doubao-Seed-1.6-flash 预估定价**：
- 输入：约 ¥0.001 / 1K tokens
- 输出：约 ¥0.002 / 1K tokens

### 单次免费诊断成本

#### 方案 1：保守估算（最少 Token）
```
输入：1,360 tokens × ¥0.001/1K = ¥0.00136
输出：300 tokens × ¥0.002/1K = ¥0.0006
总计：¥0.00196 ≈ ¥0.002（0.2分）
```

#### 方案 2：平均估算
```
输入：1,900 tokens × ¥0.001/1K = ¥0.0019
输出：350 tokens × ¥0.002/1K = ¥0.0007
总计：¥0.0026 ≈ ¥0.003（0.3分）
```

#### 方案 3：最大估算（2张图片）
```
输入：2,460 tokens × ¥0.001/1K = ¥0.00246
输出：400 tokens × ¥0.002/1K = ¥0.0008
总计：¥0.00326 ≈ ¥0.003（0.3分）
```

---

## 📈 规模化成本预测

### 每日用户量成本

| 日活用户 | 每日成本（平均） | 每月成本 | 每年成本 |
|---------|----------------|---------|---------|
| 10 | ¥0.03 | ¥0.90 | ¥10.80 |
| 50 | ¥0.15 | ¥4.50 | ¥54.00 |
| 100 | ¥0.30 | ¥9.00 | ¥108.00 |
| 500 | ¥1.50 | ¥45.00 | ¥540.00 |
| 1,000 | ¥3.00 | ¥90.00 | ¥1,080.00 |
| 5,000 | ¥15.00 | ¥450.00 | ¥5,400.00 |
| 10,000 | ¥30.00 | ¥900.00 | ¥10,800.00 |

---

## 🎯 Prompt B（付费完整报告）成本

### Token 估算

**输入**：
- System Prompt：约 600 tokens
- User Message：约 60 tokens
- 图片（2张）：约 1,200 tokens
- **总计：约 1,860 tokens**

**输出**：
- 完整报告：约 1,500 字
- Token 数量：约 **2,200 tokens**

### 单次成本
```
输入：1,860 tokens × ¥0.001/1K = ¥0.00186
输出：2,200 tokens × ¥0.002/1K = ¥0.0044
总计：¥0.00626 ≈ ¥0.006（0.6分）
```

---

## 💡 成本优化建议

### 1. 图片压缩
- 当前：原图上传，可能 500-800 tokens/张
- 优化：压缩到 300-400 tokens/张
- **节省：30-40%**

### 2. Prompt 精简
- 当前 System Prompt：800 tokens
- 优化后：600 tokens
- **节省：25%**

### 3. 输出限制
- 当前 maxTokens：800
- 实际使用：350 tokens
- 已优化 ✅

### 4. 使用缓存（如果支持）
- 缓存 System Prompt
- **节省：50-70%**（输入部分）

---

## 📊 总结

### 免费诊断（Prompt A）
- **单次成本**：约 ¥0.003（0.3分）
- **1000 用户/天**：约 ¥3/天，¥90/月
- **非常低成本**，适合免费提供

### 付费报告（Prompt B）
- **单次成本**：约 ¥0.006（0.6分）
- **定价建议**：¥29.9（利润率 99.98%）
- **成本占比**：0.02%

### 结论
✅ 当前成本结构非常健康
✅ 即使日活 10,000 用户，月成本也只需 ¥900
✅ 付费报告利润率极高（¥29.9 vs ¥0.006）
✅ 可以放心提供免费诊断服务

---

## 🔍 如何查看实际消耗

1. 登录火山引擎控制台
2. 进入"火山方舟"
3. 查看"用量统计"
4. 可以看到每次调用的实际 Token 消耗

建议定期监控实际消耗，与估算对比。
