# 🧪 API 测试指南

## 当前测试状态

已修改服务端代码，尝试使用简单的 Bearer Token 鉴权方式。

---

## 🔍 请测试以下步骤

### 1. 在浏览器中测试诊断

1. 打开 http://localhost:3000
2. 点击"开启今日问诊"
3. 上传任意图片
4. 填写信息
5. 点击"开始诊断"
6. 观察结果

### 2. 查看服务端日志

观察服务端终端的输出，应该显示：

```
📥 收到前端请求
📤 准备调用豆包 API
🔐 使用 API Key 鉴权方式
📡 豆包 API 响应: [状态码]
```

### 3. 查看浏览器控制台

按 F12 打开开发者工具，查看 Console 标签的日志。

---

## 🔑 关于 API Key 的说明

根据你提供的密钥信息：

```
Access Key ID: YOUR_ACCESS_KEY
Secret Access Key: YOUR_SECRET_KEY
```

这些看起来像是：
- Access Key ID 可能就是 API Key
- Secret Access Key 可能是 Base64 编码的

---

## 🎯 可能的鉴权方式

火山方舟可能支持以下几种方式之一：

### 方式 1：简单 Bearer Token（当前正在测试）
```
Authorization: Bearer {ACCESS_KEY}
```

### 方式 2：使用 API Key 头
```
X-API-Key: {ACCESS_KEY}
```

### 方式 3：使用火山引擎的签名方式
需要使用 HMAC-SHA256 签名算法

---

## 📝 测试结果

请告诉我测试结果：

1. **服务端日志显示什么？**
   - 状态码是多少？
   - 有什么错误信息？

2. **浏览器控制台显示什么？**
   - 有错误吗？
   - 诊断是否成功？

3. **诊断结果页面**
   - 是否显示正常的诊断结果？
   - 还是显示"诊断暂时无法完成"？

---

## 🔧 如果仍然失败

如果仍然出现 401 错误，我们需要：

1. 确认火山方舟的正确 API 端点
2. 确认正确的鉴权方式
3. 可能需要查看火山方舟的官方文档或示例代码

---

**现在请测试并告诉我结果！** 🚀
