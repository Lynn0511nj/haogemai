# 🎭 Mock 模式说明

## ✅ 当前状态

**已启用 Mock 模式**，返回模拟的诊断数据，让你可以先看到完整的应用流程。

---

## 🎯 为什么使用 Mock 模式？

因为模型名称 `doubao-pro` 不正确，导致 404 错误。在找到正确的模型名称之前，使用 Mock 数据可以：

1. ✅ 验证整个应用流程是否正常
2. ✅ 查看完整的诊断结果页面
3. ✅ 测试所有功能（包括报告生成、分享等）
4. ✅ 确保前端和服务端通信正常

---

## 🧪 现在可以测试

1. 打开 http://localhost:3000
2. 点击"开启今日问诊"
3. 上传任意图片
4. 填写信息
5. 点击"开始诊断"
6. **应该能看到完整的诊断结果！**

---

## 📊 Mock 数据包含

- ✅ 账号清晰度阶段
- ✅ 阶段启发
- ✅ 共情信息
- ✅ 核心优化方向
- ✅ 5个维度评分（雷达图）
- ✅ 完整的深度报告
- ✅ 7天行动清单

所有数据都是精心设计的示例，展示了真实诊断结果的完整结构。

---

## 🔍 如何切换到真实 API？

### 步骤 1：找到正确的模型名称

在火山方舟控制台中：

1. 访问：https://console.volcengine.com/ark/region:ark+cn-beijing/endpoint
2. 查看「推理接入点」列表
3. 找到你想使用的模型
4. 复制 Endpoint ID（类似：`ep-20241203xxxxx-xxxxx`）

### 步骤 2：更新前端代码

编辑 `services/geminiService.ts`，修改模型名称：

```typescript
const requestBody = {
  model: 'ep-你的endpoint-id',  // 替换为正确的 endpoint
  messages,
  temperature: 0.7,
  max_tokens: 4000
};
```

### 步骤 3：启用真实 API

编辑 `server/index.js`，取消注释真实 API 调用代码：

找到这段代码：
```javascript
/* 真实 API 调用代码（等配置正确的模型名称后启用）
const response = await fetch(ARK_API_URL, {
  ...
});
*/
```

删除注释符号 `/*` 和 `*/`，并删除 Mock 数据部分。

### 步骤 4：重启服务端

```bash
# 停止服务端（Ctrl+C）
# 重新启动
npm run server
```

---

## 🎨 Mock 模式的优势

1. **快速验证**：无需等待 API 配置，立即看到效果
2. **完整体验**：体验所有功能，包括报告生成、分享等
3. **稳定测试**：不受 API 限制，可以无限次测试
4. **开发友好**：方便前端开发和调试

---

## 📝 服务端日志

当前使用 Mock 模式时，服务端会显示：

```
📥 收到前端请求
📤 准备调用豆包 API
🔐 使用 API Key 鉴权
⚠️  当前使用 Mock 模式（模型名称需要配置）
✅ 返回 Mock 数据（用于测试）
```

---

## 🔄 下一步

1. **先测试 Mock 模式**，确保应用流程正常
2. **在火山方舟控制台找到正确的模型名称**
3. **更新配置并切换到真实 API**

---

**现在就去测试吧！应该能看到完整的诊断结果了！** 🎉
